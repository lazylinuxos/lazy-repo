# Template file for 'dsearch'
pkgname=dsearch
version=${VERSION}
revision=1
build_style=go
go_import_path="github.com/AvengeMedia/danksearch"
go_package="./cmd/dsearch"
short_desc="Fast filesystem search service"
maintainer="nerdyslacker <karyan40024@gmail.com>"
license="MIT"
homepage="https://github.com/AvengeMedia/danksearch"
distfiles="https://github.com/AvengeMedia/danksearch/archive/refs/tags/v${version}.tar.gz"
checksum=${SHA256}

do_build() {
    export CGO_CPPFLAGS="${CPPFLAGS}"
    export CGO_CFLAGS="${CFLAGS}"
    export CGO_CXXFLAGS="${CXXFLAGS}"
    export CGO_LDFLAGS="${LDFLAGS}"
    export GOFLAGS="-buildmode=pie -trimpath -ldflags=-linkmode=external -mod=readonly -modcacherw"

    go build -o dsearch ./cmd/dsearch
}

do_install() {
	vbin dsearch
	vsv ${pkgname}
	vlicense LICENSE
}