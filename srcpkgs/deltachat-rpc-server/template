# Template for deltachat-rpc-server
pkgname=deltachat-rpc-server
version=2.35.0
revision=1
build_style=cargo
hostmakedepends="pkg-config sqlcipher-devel openssl-devel"
depends="glibc libgcc"
short_desc="JSON-RPC 2.0 interface to DeltaChat over standard I/O"
maintainer="nerdyslacker <karyan40024@gmail.com>"
license="MPL-2.0"
homepage="https://github.com/chatmail/core/tree/main/deltachat-rpc-server"
distfiles="https://github.com/chatmail/core/archive/refs/tags/v${version}.tar.gz"
checksum=86ec68f290e67d58a40a98c1603558d10c406f0e2f6dad47534ffd38d0bfef0f
cargo_pkg="${pkgname}"

do_build() {
    CFLAGS="${CFLAGS} -ffat-lto-objects"
    cargo build --release --package ${pkgname}
}

do_install() {
	vbin target/release/${pkgname}
    vinstall README.md 644 usr/share/doc/${pkgname}
}
