# Template for deltachat-rpc-server
pkgname=deltachat-rpc-server
version=2.44.0
revision=1
build_style=cargo
hostmakedepends="pkg-config sqlcipher-devel openssl-devel"
depends="glibc libgcc"
short_desc="JSON-RPC 2.0 interface to DeltaChat over standard I/O"
maintainer="nerdyslacker <karyan40024@gmail.com>"
license="MPL-2.0"
homepage="https://github.com/chatmail/core/tree/main/deltachat-rpc-server"
distfiles="https://github.com/chatmail/core/archive/refs/tags/v${version}.tar.gz"
checksum=061104da72a60f37ad09b7b441b5e523036af3389ff1941d3a1979040ee66348
cargo_pkg="${pkgname}"

do_build() {
    CFLAGS="${CFLAGS} -ffat-lto-objects"
    cargo build --release --package ${pkgname}
}

do_install() {
	vbin target/release/${pkgname}
    vinstall README.md 644 usr/share/doc/${pkgname}
}
